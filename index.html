<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>数式処理</title>
    <script type="text/javascript" src="./src/main.js"></script>
    <script type="text/javascript">
    function BodyOnLoad(){
        var math_txt = document.getElementById("math-txt")

        var lex = new Lex();
        var token_list = lex.lexicalAnalysis(math_txt.value);

        var parser = new Parser();
        var stmt_list = parser.parse(token_list);

        var svg_1 = document.getElementById("svg-1");
        var ctx = new ContextUI(svg_1);
        ctx.makeUI(stmt_list);
        ctx.draw();

        var svg_2 = document.getElementById("svg-2");

        var y = 30;
        for(let font_family of [ "STIX2-Math", "STIX2-Bold", "STIX2-BoldItalic", "STIX2-Italic", "STIX2-Regular" ]){
            var x = 5;
            for(let s of [ "a", "+", "p", "⋅", "2", "cdefghijklmnopqrstuvwxyzΣ", "∫\u222B∬∭∞√∛∜\u221A\u221B\u221C" ]){

                var txt = new TextUI(null, s, svg_2, 12, font_family)
                var w = txt.width;
                txt.setXY(x, y);
                txt.draw(0, 0);

                x += w + 1;
            }

            y += txt.height;
        }
    }

    </script>    

    <style type="text/css">
    @font-face {
        font-family: 'STIX2-Math';
        src: url('./font/STIX2Math.woff2') format('woff2');
    }
    @font-face {
        font-family: 'STIX2-Bold';
        src: url('./font/STIX2Text-Bold.woff2') format('woff2');
    }
    @font-face {
        font-family: 'STIX2-BoldItalic';
        src: url('./font/STIX2Text-BoldItalic.woff2') format('woff2');
    }
    @font-face {
        font-family: 'STIX2-Italic';
        src: url('./font/STIX2Text-Italic.woff2') format('woff2');
    }
    @font-face {
        font-family: 'STIX2-Regular';
        src: url('./font/STIX2Text-Regular.woff2') format('woff2');
    }
    </style>    

</head>
<body onload="BodyOnLoad()">

    <svg id="svg-1" version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" width="500" height="100" />
    <svg id="svg-2" version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" width="500" height="200" />
    
    <textarea cols="50" rows="5" id="math-txt">
        var a : int;
        a + p * 2;
    </textarea>    
</body>
</html>